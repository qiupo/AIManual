# 数据清洗与准备

## 🧹 数据质量决定分析质量

数据清洗占分析工作的60-80%。AI让这个过程从数天缩短到数小时。

## 数据清洗常见问题

### 问题类型

```
1. 缺失值
   - 空值
   - NULL
   - 占位符

2. 重复数据
   - 完全重复
   - 部分重复

3. 格式问题
   - 日期格式
   - 数字格式
   - 文本格式

4. 异常值
   - 极端值
   - 不合理值
   - 错误值

5. 不一致性
   - 拼写错误
   - 大小写
   - 命名规范
```

## AI辅助数据清洗

### 完整清洗流程

```python
# 提示词模板
"请帮我清洗以下数据：

数据描述：
[字段说明]

发现的问题：
1. [问题1]
2. [问题2]
...

请：
1. 编写清洗代码
2. 说明处理策略
3. 解释每步操作
4. 生成清洗报告"
```

### 实战案例

```python
# 提示词
"读取sales.csv，清洗数据：

问题：
- price有负数
- date格式不统一
- category有缺失
- 有重复行

处理策略：
- 删除负价格
- 统一日期格式
- 填充分类
- 去重"

# AI生成代码
import pandas as pd

# 读取数据
df = pd.read_csv('sales.csv')

# 处理负价格
df = df[df['price'] > 0]

# 统一日期格式
df['date'] = pd.to_datetime(df['date'],
                           errors='coerce')

# 填充分类
df['category'].fillna('未知',
                      inplace=True)

# 去重
df.drop_duplicates(inplace=True)

# 清洗报告
print(f"原始行数: {原始行数}")
print(f"清洗后: {len(df)}")
print(f"删除: {原始行数 - len(df)}行")
```

## 数据准备技巧

### 技巧1：特征工程

```
"基于原始数据创建新特征：

原始特征：
- 生日
- 注册时间
- 购买金额

请创建：
- 年龄
- 注册天数
- 购买等级"
```

### 技巧2：数据转换

```
"转换数据格式：

1. 分类变量编码
2. 数值标准化
3. 时间序列分解

提供代码和解释"
```

### 技巧3：数据合并

```
"合并两个数据集：

数据A：用户信息
数据B：用户行为

合并方式：左连接
匹配键：user_id

请生成合并代码"
```

## 🎯 实战练习

```
任务：清洗真实数据集

步骤：
1. 下载数据集
2. 用AI诊断问题
3. 生成清洗代码
4. 验证清洗结果

目标：数据质量提升到可用状态
```

## 📚 总结

数据清洗是分析的基础。

**核心原则：**
- 先诊断再处理
- 记录清洗过程
- 保留原始数据
- 验证清洗效果

---

💡 **下一步**：学习[探索性数据分析](./03-探索性数据分析.md)！
